<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Storage Explorer</ion-title>

    <ion-buttons slot="end">
      <!-- Refresh -->
      <button mat-icon-button
              [title]="'COMMON.BTN_REFRESH'|translate"
              (click)="refresh()">
        <mat-icon>refresh</mat-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">

  <ion-modal #askToSend>
    <ng-template>
      <ion-content class="ion-padding">
        <ion-item lines="none" translate>CONFIRM.SEND_DEBUG_DATA</ion-item>
      </ion-content>
      <ion-footer>
        <ion-toolbar>

          <ion-row class="ion-no-padding" nowrap>
            <ion-col></ion-col>

            <!-- buttons -->
            <ion-col size="auto">
              <ion-button fill="clear" color="dark" (click)="closeModal()">
                <ion-label translate>COMMON.BTN_CANCEL</ion-label>
              </ion-button>

              <ion-button fill="solid" (click)="sendData()" color="tertiary">
                <ion-label translate>COMMON.BTN_VALIDATE</ion-label>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-toolbar>
      </ion-footer>
    </ng-template>
  </ion-modal>

  <ion-grid class="ion-padding list-istorage">
    <ion-row>
      <ion-col size="12" size-lg="6" class="mat-header-cell">
        <ion-label translate>REFERENTIAL.LABEL</ion-label>
      </ion-col>
      <ion-col class="mat-header-cell">
        <ion-label translate>REFERENTIAL.TYPE</ion-label>
      </ion-col>
      <ion-col class="mat-header-cell ion-text-start">
        <ion-label>Nb</ion-label>
      </ion-col>
      <ion-col class="mat-header-cell" size="auto">
      </ion-col>
    </ion-row>


    <ion-row class="mat-row" *rxFor="let item of $items; trackBy: trackByFn; odd as odd;"
             [class.odd]="odd" >
      <ion-col size="12" size-lg="6">
        <ion-label class="ion-text-wrap">{{ item.key }}</ion-label>
      </ion-col>
      <ion-col class="ion-text-start">
        <ion-label>{{ item.type }}</ion-label>
      </ion-col>
      <ion-col class="ion-text-start">
        <ion-label>{{ item.total }}</ion-label>
      </ion-col>
      <ion-col size="auto">
        <ion-label>
          <ion-button color="primary" style="fill" (click)="askToSendData(item.key)" translate>
            COMMON.BTN_SEND
          </ion-button>
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>


  <ng-container *ngIf="$loading|async; else noResult">
    <ion-item>
      <ion-skeleton-text animated></ion-skeleton-text>
    </ion-item>
  </ng-container>

  <ng-template #noResult>
    <ion-item *ngIf="$items|async|isEmptyArray">
      <ion-text color="danger"
                class="text-italic"
                [innerHTML]="'COMMON.NO_RESULT' | translate">
      </ion-text>
    </ion-item>
  </ng-template>

</ion-content>
