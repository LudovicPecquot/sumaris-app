<ion-header>
  <ion-toolbar color="primary">

    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>

    <ion-title>Autocomplete field test page</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <form class="form-container" [formGroup]="form" (ngSubmit)="doSubmit($event)">
   <ion-grid class="ion-no-padding">

     <!-- Filter -->
     <ion-row>
       <!-- Program -->
       <ion-col>
         <mat-autocomplete-field formControlName="program" class="min-width-large ion-text-wrap"
                                 [placeholder]="'TRIP.TABLE.FILTER.PROGRAM'|translate"
                                 [config]="autocomplete.fields.program"
                                 [tabindex]="1"
                                 required>
         </mat-autocomplete-field>
       </ion-col>

       <!-- Gear -->
       <ion-col>
         <mat-autocomplete-field formControlName="gear"
                                 [placeholder]="'TRIP.PHYSICAL_GEAR.LIST.GEAR'|translate"
                                 [tabindex]="2"
                                 [required]="true"
                                 [config]="autocomplete.fields.gear">
         </mat-autocomplete-field>
       </ion-col>

       <!-- Example select -->
       <ion-col>
         <mat-autocomplete-field formControlName="example"
                                 placeholder="Data example"
                                 [tabindex]="3"
                                 [required]="true"
                                 [config]="autocomplete.fields.example">
         </mat-autocomplete-field>
       </ion-col>
     </ion-row>

     <!-- examples data -->
     <ion-row><ion-col><ion-text><h4>Input data</h4></ion-text></ion-col></ion-row>
     <ion-row>

       <!-- buttons -->
       <ion-col size="2">
         <!-- log tree -->
         <ion-button (click)="dumpExample()"
                     fill="outline">
           <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
         </ion-button>
         <!-- copy to -->
         <ion-button (click)="applyExample()"
                     fill="outline">
           <ion-icon name="arrow-down" slot="icon-only"></ion-icon>
         </ion-button>
       </ion-col>
       <ion-col size="10">
         <ion-text color="medium">
           <h4>Output: </h4>
           <p [innerHTML]="outputs.example">
           </p>
         </ion-text>
       </ion-col>
     </ion-row>

      <!-- mobile -->
      <ion-row><ion-col><ion-text><h4>Mobile mode</h4></ion-text></ion-col></ion-row>
      <ion-row>
        <ion-col size="12">

          <app-batch-tree #mobileBatchTree
                          [programLabel]="$programLabel|async"
                          [gearId]="$gearId|async"
                          queryTabIndexParamName="mobileTab"
                          [programLabel]="$programLabel | async"
                          [usageMode]="'FIELD'"
                          [mobile]="true"
                          [debug]="true">
          </app-batch-tree>
        </ion-col>

        <!-- buttons -->
        <ion-col size="2">
          <!-- Save -->
          <ion-button (click)="save($event, mobileBatchTree, 'mobile')"
                      title="Save the table" color="danger"
                      [disabled]="!mobileBatchTree.dirty"
                      [fill]="mobileBatchTree.dirty ? 'solid': 'outline'" translate>
            COMMON.BTN_SAVE
          </ion-button>

          <!-- log tree -->
          <ion-button (click)="dumpBatchTree(mobileBatchTree, 'mobile')"
                      matTooltip="Output data to log"
                      fill="outline">
            <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
          </ion-button>

          <!-- copy to -->
          <ion-button (click)="copyBatchTree(mobileBatchTree, desktopBatchTree)"
                      matTooltip="Copy to desktop table"
                      fill="outline">
            <ion-icon name="arrow-down" slot="icon-only"></ion-icon>
          </ion-button>

          <!-- Reload from himself -->
          <ion-button (click)="copyBatchTree(mobileBatchTree, mobileBatchTree)"
                      matTooltip="Reload from himself data"
                      fill="outline">
            <ion-icon name="reload-circle" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="10">
          <ion-text color="medium">
            <h4>Output: </h4>
            <p [innerHTML]="outputs.mobile">
            </p>
          </ion-text>
        </ion-col>
      </ion-row>

     <!-- desktop -->
     <ion-row><ion-col><ion-text><h4>Desktop mode</h4></ion-text></ion-col></ion-row>
     <ion-row>
       <ion-col size="12">

         <app-batch-tree #desktopBatchTree
                         [programLabel]="$programLabel|async"
                         [gearId]="$gearId|async"
                         queryTabIndexParamName="desktopTab"
                         [usageMode]="'FIELD'"
                         [mobile]="false"
                         [allowSubBatches]="true"
                         [debug]="true">
         </app-batch-tree>
       </ion-col>

       <!-- buttons -->
       <ion-col size="2">
         <!-- Save -->
         <ion-button (click)="save($event, desktopBatchTree, 'desktop')"
                     title="Save the table" color="danger"
                     [disabled]="!desktopBatchTree.dirty"
                     [fill]="desktopBatchTree.dirty ? 'solid': 'outline'" translate>
           COMMON.BTN_SAVE
         </ion-button>

         <!-- log tree -->
         <ion-button (click)="dumpBatchTree(desktopBatchTree, 'desktop')"
                     title="Output data to log"
                     fill="outline">
           <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
         </ion-button>

         <!-- copy to -->
         <ion-button (click)="copyBatchTree(desktopBatchTree, mobileBatchTree)"
                     title="Copy data to mobile table"
                     fill="outline">
           <ion-icon name="arrow-up" slot="icon-only"></ion-icon>
         </ion-button>

         <!-- Reload from himself -->
         <ion-button (click)="copyBatchTree(desktopBatchTree, desktopBatchTree)"
                     title="Reload from himself data"
                     fill="outline">
           <ion-icon name="reload-circle" slot="icon-only"></ion-icon>
         </ion-button>

       </ion-col>
       <ion-col size="10">
         <ion-text color="medium">
           <h4>Output: </h4>
           <p [innerHTML]="outputs.desktop">
           </p>
         </ion-text>
       </ion-col>

     </ion-row>
    </ion-grid>

  </form>

</ion-content>
